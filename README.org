#+TITLE: emacs 配置

* 概述

这是我在使用 eamcs 过程中根据自己需求对 emacs 的配置。

我的系统是 +Gentoo+，已经转成 FreeBSD 。

eamcs 版本是 25.3 。

1) 插件 exwm 已经暂时不用，现在用的是 stumpwm
2) 插件 fcitx 也暂时不用，输入法使用的是 fcitx，环境变量加入 LC_CTYPE=en_US.UTF-8，后续会启用这个插件，以带来更好的体验

* 目录结构

主要文件：

#+BEGIN_SRC sh
.
├── init.el                       # Emacs 从这个文件开始执行
└── lisp                          # 各个（插件）配置文件
    ├── init-better.el            # 与插件无关的配置
    ├── init-company.el           # 与自动补全 company 相关
    ├── init-elpa.el              # 初始化 ELPA
    ├── init-exwm.el              # wm
    ├── init-ggtags.el            # 代码浏览
    ├── init-im.el                # 输入法
    ├── init-multiple-cursors.el  # 多行编辑
    ├── init-org.el               # org-mode 配置
    ├── init-slime.el             # slime 相关
    ├── init-smex.el              # smex 相关
    ├── init-window-numbering.el  # 窗口跳转
    └── init-yasnippet.el         # yasnippet 相关
#+END_SRC

* 插件

| 插件                | 功能               |
|---------------------+--------------------|
| company             | 自动补全框架       |
| company-auctex      | LaTeX 补全后端     |
| company-c-headers   | C 头文件补全       |
| slime-company       | slime 补全后端     |
| yasnippet           | 模板系统           |
| common-lisp-snippet | common lisp 的模板 |
| slime               | lisp 交互模式      |
| multiple-cursors    | 多行编辑           |
| smex                | M-x 模糊匹配       |
| window-numbering    | 跳转子窗口         |
| exwm                | wm                 |
| fcitx               | 使输入法更好用     |
| ggtags              | 更好的浏览代码     |

* 说明

1) 以下环境自动补全（company + yasnippet）
   1) C/C++
   2) Common Lisp
   3) Emacs Lisp
   4) Slime
   5) +LaTeX+
   6) org
   7) asm
2) Common Lisp 的自动补全需要开启 slime (M-x slime)，同时 slime-repl-mode 要自动补全也需要打开任意的 lisp 文件，两者内在逻辑关系有空在理清
3) exwm +尝试尝试，下面 4 和 5 两点主要是为了更好使用这个 wm 而设置的+ 感觉不错
4) +chinese-wbim，给 emacs 配置 fcitx 没成功，所以只能选用这个了，虽然比不上 fcitx ，但也是可以的+ [[doc/im.org][输入法]]
5) 改用了 wombat 主题，之所以放在 init.el 第一行，是为了能更快动用上，这样可以缩短启动时显示为白色的时间（刺眼）
6) ggtags，gtags（需安装 GNU Global）的一个拓展，使用这个来浏览代码（更好进行代码定义调用等跳转）

* 之后计划

***** TODO [-] 安装 magit
***** DONE [x] 之前的补全是直接全局打开，之后会细化，在相应模式下打开（add-hook）
***** TODO [-] 优化代码
***** DONE [x] 使得能更好的阅读比较大的 C 语言项目代码（其实就是 Linux kernel source）

* 问题

1) 由于 lisp/init-elpa.el 中，require-package 写的不太好，会产生多次 package-refresh-contents
2) latex-mode 下的自动补全出问题，使用了 latex-mode-hook 但是不知道为什么没有执行（看上去是这样），需要手动执行
